{% extends "filter_base.html" %}

{% block title %}
  Test Plan Form
{% endblock %}


{% block content %}

<div class="span10" id="content">
<div class="well">
<form method="post" action="." class="form-horizontal" onsubmit="return validate()" id="Form">
{% csrf_token %}

<legend>
<h2> Create a phase for the test plan </h2>
</legend>
{{phase.name}}
<br />
Make sure you add test cases in the bottom first before submitting!
<br />
<input type="submit" class="btn btn-info" value="Submit"/>
</form>
</div>

<!-- interactive table starts here. where u add test cases -->
<div id="addTestCases">
  <legend><h2> Add test cases </h2></legend> 
  {% block filter_sidebar %} {{ block.super }} {% endblock %}

<div class="span9" id="bothTables">

<center>Add test cases from the bottom table to the top table with the "<i class="icon-plus"></i>" in order to include test cases.</center>
<br><br>

    <!-- This div is where you see which test cases you have selected -->
    <div class="span12" id="toEdit">

        <h2> Active Test Cases </h2>
        <table class="table table-bordered table-condensed" id=toEditTable>
            <thead>
            <tr>
                <th class="removeCol"> Remove </th>
                <th> ID </th>
                <th> Name </th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>

    </div>  <!-- End id="toEdit where you view which test cases you have selected -->
<br>

    <!-- this div is where you see all the test cases and choose which to add -->
<div id="table" class="span12">
<h2> All Test Cases </h2>
<table class="table table-bordered table-condensed" id="activeTable">
  <thead>
    <tr>
      <th> Add </th>
      <th> ID </th>
      <th> Name </th>
      <th> Category </th>
    </tr>
  </thead>
  <tbody>
{% for entry in tests %}
  <tr>
  <td><a href="#" class="add" onclick="return false" id="id_{{entry.id}}" value={{entry.id}}> <i class="icon-plus" id="id_{{entry.id}}"></i> </a></td>
  <td> {{ entry.id }} </td>
  <td><a href="{{ entry.get_absolute_url }}" class="name" id="id_{{entry.id}}"> {{ entry.name }} </a></td>
  <td class="category" id="id_{{entry.id}}"> {{ entry.category }} </td>
  </tr>
{% endfor %}
 </tbody>
</table>


<!-- Next/Prev page links  -->
{% block ajaxPagination %}{{ block.super }}{% endblock %}
<!--- END pagination --->

</div> <!-- End id="table" , where you add test cases-->




</div> <!-- End id="bothTables" -->


</div> <!-- End id="addTestCases" -->

</div><!-- End div id="content" -- >

{% endblock %}


{% block post_js %}


<script type='text/javascript'>
$(document).ready(function(){
  makeRequired();
})

// RECEIVE JSON cat_map
var cat_map = {{ cat_map|safe }}
//cat_map is a dictionary with its key as the pk of a category, and its value as the category name
// e.g cat_map[2] == "Policy"  is true


// RECEIVE JSON prod_map. similar to cat_map
var prod_map = {{ prod_map|safe }}

// RECEIVE JSON currentEdit. similar to cat_map.
// currentEdit is an array of strings with ID's that are already/going to be included in a testplan
// e.g ['id_1','id_5']
var currentEdit = {{ currentEdit|safe }}

</script>

<script src="/static/js/test_plan_form.js" type="text/javascript"></script>
{% endblock %}
